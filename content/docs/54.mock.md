---
title: 'Mock'
description: 'Mockå¼€å‘ä½¿ç”¨æŒ‡å—'
---

# Mock




## MOCKæ–¹æ¡ˆ1ï¼šä½¿ç”¨æ¥å£ç®¡ç†å¹³å°ï¼Œ

[apifox ğŸŒŸ](https://www.apifox.cn/?utm_source=zhihu&utm_medium=article_10001&utm_content=141425111){.doclink}

[easy-mock ğŸŒŸ](https://mock.presstime.cn/){.doclink}

[yapi æ¥å£æ–‡æ¡£](https://hellosean1025.github.io/yapi/documents/index.html){.doclink}

[Swagger æ¥å£æ–‡æ¡£](https://swagger.io/){.doclink}

[Postman æ¥å£æµ‹è¯•](https://www.postman.com/){.doclink}




## MOCKæ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨ Mock æ¨¡æ‹Ÿå¹¶æ‹¦æˆª Ajax è¯·æ±‚

[mock.js](http://mockjs.com/){.doclink}

<br />


#### é…ç½® Mock ç¯å¢ƒ

```bash
# å®‰è£…
pnpm add -D mockjs
# OR
<script src="http://mockjs.com/dist/mock.js"></script>

# ç›®å½•
â”œâ”€mock
â”‚  â”œâ”€test
â”‚  â”‚  â””â”€index.ts
```


#### ä½¿ç”¨

```js
// é…ç½® Mock
import Mock from 'mockjs'

const { newsList } = Mock.mock({
  'newsList|80': [{
    'id': '@increment()',
    'title': '@ctitle()',
    'date': '@date("yyyy-MM-dd")'
  }],
})

// æ•°æ®éšæœºè§„åˆ™ http://mockjs.com/examples.html
Mock.mock(/\/api\/news\/list/, 'get', (params) => {
  console.log(params.url) // '/api/news/list?pageSize=10&pageIndex=1'
  const pageIndex = getQuery(params.url, 'pageIndex')
  const pageSize = getQuery(params.url, 'pageSize')
  const start = (pageIndex - 1) * pageSize
  const end = pageIndex * pageSize
  const totalPage = Math.ceil(newsList.length / pageSize)
  const list = pageIndex > totalPage ? [] : newsList.slice(start, end)
 
  return {
    status: 200,
    list: list,
    total: newsList.length
    message: 'è·å–æ–°é—»åˆ—è¡¨æ•°æ®æˆåŠŸ'
  }
})

Mock.mock('/api/add/news', 'post', (params) => {
  console.log(params.body) // "{title:''}"
  const body = JSON.pase(params.body)
  newsList.push(Mock.mock({
    'id|+1': '@increment()',
    'title': body.title,
    'date': '@date("yyyy-MM-dd")'
  }))

  return {
    status: 200,
    list: newsList,
    total: newsList.length
    message: 'æ·»åŠ æ–°é—»æ•°æ®æˆåŠŸ'
  }
})

// ä½¿ç”¨
axios.get('/api/news/list', {
  params: { pageSize: 10, pageIndex: 1 }
})
  .then(res => console.log(res))

axios.post('/api/add/news', {
  title: '',
})
  .then(res => console.log(res))
```




## charles æŠ“åŒ…å·¥å…·

[charles æŠ“åŒ…å·¥å…·](https://www.charlesproxy.com/){.doclink}


#### Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†

- èœå• Proxy â€“> macOS Proxy
- é»˜è®¤æƒ…å†µä¸‹æ— æ³•æˆªå– Chrome å’Œ Firefox æµè§ˆå™¨çš„ç½‘ç»œé€šè®¯å†…å®¹ã€‚
- å¦‚æœä½ éœ€è¦æˆªå–çš„è¯ï¼Œåœ¨ Chrome ä¸­è®¾ç½®æˆä½¿ç”¨ç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨è®¾ç½®å³å¯ï¼Œæˆ–è€…ç›´æ¥å°†ä»£ç†æœåŠ¡å™¨è®¾ç½®æˆ 127.0.0.1:8888 ä¹Ÿå¯è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚


#### iPhone æ‰‹æœºä¸Šçš„ç½‘ç»œå°åŒ…

- èœå• Proxy â€“> Proxy Settings
- å¡«å…¥ä»£ç†ç«¯å£ 8888
- å‹¾ä¸Š "Enable transparent HTTP proxying" 
- èœå• Help â€“> Local IP Addressï¼Œå¤åˆ¶ IP åœ°å€
- iPhone çš„ è®¾ç½® â€“> æ— çº¿å±€åŸŸç½‘ï¼Œå½“å‰è¿æ¥çš„ wifi åï¼Œé€šè¿‡ç‚¹å‡»å³è¾¹çš„è¯¦æƒ…é”®ï¼Œæœ€ä¸‹è¾¹ HTTP ä»£ç†åˆ‡æ¢æˆæ‰‹åŠ¨ï¼Œå¡«ä¸Š Charles è¿è¡Œæ‰€åœ¨çš„ç”µè„‘çš„ IPï¼Œä»¥åŠç«¯å£å· 8888
- Allow Charles è¯·æ±‚è¿æ¥


#### å…¶ä»–

- æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•
- æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°
- æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹
- æ”¯æŒæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ
- Structure è§†å›¾å°†ç½‘ç»œè¯·æ±‚æŒ‰è®¿é—®çš„åŸŸååˆ†ç±»
- Sequence è§†å›¾å°†ç½‘ç»œè¯·æ±‚æŒ‰è®¿é—®çš„æ—¶é—´æ’åº
- Map åŠŸèƒ½é€‚åˆé•¿æœŸåœ°å°†æŸä¸€äº›è¯·æ±‚é‡å®šå‘åˆ°å¦ä¸€ä¸ªç½‘ç»œåœ°å€æˆ–æœ¬åœ°æ–‡ä»¶
- Rewrite åŠŸèƒ½é€‚åˆå¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸€äº›æ­£åˆ™æ›¿æ¢
- Breakpoints åŠŸèƒ½é€‚åˆåšä¸€äº›ä¸´æ—¶æ€§çš„ä¿®æ”¹




## whistle æŠ“åŒ…å·¥å…·

[whistle æŠ“åŒ…å·¥å…·](http://wproxy.org/whistle/){.doclink}
