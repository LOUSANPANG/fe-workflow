{"_path":"/docs/husky-lintstaged","_dir":"docs","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Husky&Lintstaged","description":"Husky&Lintstaged配置使用指南","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"husky-lintstaged"},"children":[{"type":"text","value":"Husky & Lintstaged"}]},{"type":"element","tag":"h4","props":{"id":"husky-配置-git-hooks在代码提交不同阶段进行质量检测"},"children":[{"type":"text","value":"Husky 配置 Git Hooks，在代码提交不同阶段进行质量检测。"}]},{"type":"element","tag":"h4","props":{"id":"lint-staged-取消全量检测整个仓库对待提交区做到增量代码检测"},"children":[{"type":"text","value":"lint-staged 取消全量检测整个仓库，对待提交区做到增量代码检测。"}]},{"type":"element","tag":"h4","props":{"id":"配合-husky由-husky-触发-lint-staged再由-lint-staged-执行检测脚本"},"children":[{"type":"text","value":"配合 husky，由 husky 触发 lint-staged，再由 lint-staged 执行检测脚本。"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同阶段 Git Hooks\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\npre-commit # git commit 执行前\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncommit-msg # git commit 执行前（检测 commit 信息）\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\npre-push # git push 执行前"}]}]},{"type":"element","tag":"h2","props":{"id":"安装"},"children":[{"type":"text","value":"安装"}]},{"type":"element","tag":"code","props":{"code":"pnpm add husky lint-staged -D\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d15535"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"husky"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"lint-staged"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-50e6b6"},"children":[{"type":"text","value":"-D"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"配置方法一通过配置脚本"},"children":[{"type":"text","value":"【配置方法一】通过配置脚本"}]},{"type":"element","tag":"code","props":{"code":"# 在 package.json 中添加脚本\n{\n  \"scripts\": {\n    \"prepare\": \"husky install\"\n  }\n}\n\n# 初始化 husky，husky 代替 git hooks (根目录创建 .husky 文件夹)\npnpm prepare\n\n# .husky/pre-commit 添加触发命令（提交代码时会执行 lint-staged 进行暂存代码检查）\nnpx husky add .husky/pre-commit \"npx lint-staged\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d2b5b"},"children":[{"type":"text","value":"# 在 package.json 中添加脚本"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"  \"scripts\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"    \"prepare\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":" \"husky install\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d2b5b"},"children":[{"type":"text","value":"# 初始化 husky，husky 代替 git hooks (根目录创建 .husky 文件夹)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d15535"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"prepare"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d2b5b"},"children":[{"type":"text","value":"# .husky/pre-commit 添加触发命令（提交代码时会执行 lint-staged 进行暂存代码检查）"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d15535"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"husky"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":".husky/pre-commit"}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"npx lint-staged\""}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"创建-lintstagedrc"},"children":[{"type":"text","value":"创建 .lintstagedrc"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"*.vue\": [\"prettier --write .\", \"eslint  --fix\", \"stylelint --fix\"],\n  \"*.{js,jsx,ts,tsx}\": [\"prettier --write .\", \"eslint  --fix\"],\n  \"*.md\": [\"prettier --write\"],\n  \"*.{htm,html,css,sss,less,scss,sass}\": [\"stylelint --fix\"]\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.vue\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"prettier --write .\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"eslint  --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"stylelint --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.{js,jsx,ts,tsx}\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"prettier --write .\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"eslint  --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.md\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"prettier --write\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.{htm,html,css,sss,less,scss,sass}\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"stylelint --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"配置方法二通过配置-packagejson"},"children":[{"type":"text","value":"【配置方法二】通过配置 package.json"}]},{"type":"element","tag":"code","props":{"code":"\"husky\": {\n  \"hooks\": {\n    \"pre-commit\": \"lint-staged\",\n  }\n},\n\"lint-staged\": {\n  \"*.vue\": [\n    \"eslint --fix\",\n    \"stylelint --fix\"\n  ],\n  \"*.{js,jsx,ts,tsx}\": [\n    \"eslint --fix\"\n  ],\n  \"*.{htm,html,css,sss,less,scss,sass}\": [\n    \"stylelint --fix\"\n  ]\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"husky\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"hooks\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"pre-commit\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"lint-staged\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"},"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"lint-staged\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.vue\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"eslint --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"stylelint --fix\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.{js,jsx,ts,tsx}\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"eslint --fix\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c701af"},"children":[{"type":"text","value":"\"*.{htm,html,css,sss,less,scss,sass}\""}]},{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c1c399"},"children":[{"type":"text","value":"\"stylelint --fix\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"  ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdef0d"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c701af{color:#8DDB8C}\n.ct-6d2b5b{color:#768390}\n.ct-50e6b6{color:#6CB6FF}\n.ct-c1c399{color:#96D0FF}\n.ct-bdef0d{color:#ADBAC7}\n.ct-d15535{color:#F69D50}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"安装","depth":2,"text":"安装"},{"id":"配置方法一通过配置脚本","depth":2,"text":"【配置方法一】通过配置脚本"},{"id":"配置方法二通过配置-packagejson","depth":2,"text":"【配置方法二】通过配置 package.json"}]}},"_type":"markdown","_id":"content:docs:31.husky-lintstaged.md","_source":"content","_file":"docs/31.husky-lintstaged.md","_extension":"md"}